<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F´ Flight Software - C/C++ Documentation: F′ Development Process</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">F´ Flight Software - C/C++ Documentation<span id="projectnumber">&#160;devel</span>
   </div>
   <div id="projectbrief">A framework for building embedded system applications to NASA flight quality standards.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_fprime_2docs_2documentation_2user-manual_2overview_2development-practice.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">F′ Development Process</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md392"></a></p>
<p>The purpose of this guide is to lay out the standard F´ development process. This is the process used by most developers who use F´ and, as such, many of the F´ tools are written to support the stages of the process. This guide will walk through each step in this process.</p>
<p>The process:</p>
<ol type="1">
<li>High Level Design: Draft high level requirements and architecture.</li>
<li>Setup Deployment: Setup project F´ deployment</li>
<li>Develop Components: Create individual project components<ul>
<li>Design and Requirements: Draft component requirements and interfaces</li>
<li>Creating a Port: Implement component interfaces</li>
<li>Creating a Component Definition: Create initial mockup of component</li>
<li>Component Implementation: Implement component behavior</li>
<li>Component Unit Testing: Test and verify component behavior</li>
</ul>
</li>
<li>Assemble Topology: Compose a F´ deployment from individual components</li>
<li>Integration Testing: Verify high-level project behaviors</li>
</ol>
<h1><a class="anchor" id="autotoc_md393"></a>
High-Level Design</h1>
<p>The first step of the development process is to establish a high-level design for the project. This involves specifying system-level requirements and a block diagram that represents the key system functionality. Once complete the project should break this functionality into discrete units of functionality that represent the system. In addition, the interface between these units should be defined. The units of functionality are Components and the interfaces are further broken down into discrete calls or actions through that interface. These are F´ ports. The full design of the system of components and ports is the Topology. See: <a class="el" href="md_fprime_2docs_2documentation_2user-manual_2overview_2port-comp-top.html">Ports Components and</a>Topologies"

Next, the project should review the components provided by the F´ framework to see what
functionality can be inherited for free. This usually consists of the basic command and data
handling components, the Os layer, drivers, and other Svc components. Where possible, these
components should be used as-is to support a project to minimize extra work, but these may be
cloned and owned if they fall short of project requirements.

The project now has a list of what components they must provide, and what they will inherit.

@section autotoc_md394 Setup Deployment

The next step for most projects is to prepare for development. This means getting enough of a
deployment setup such that the developers can be assigned components and ports to implement, and
test within a working deployment.

There are two options for creating a deployment:

You can create an in-tree deployment, where a deployment is created within the F´ git repository.
This is convenient and requires minimal setup, but placing your code within the F´ source tree
can make it harder to update F´ in the future if the project wants to take advantage of future
bug fixes and features. To create an in-tree deployment, the Ref application can be copied and used
as a starting point.

Another option is creating a standalone deployment, where the deployment is set up by itself and
points to an F´ installation. This requires more upfront work to setup, but provides the benefit
of separating mission code from F´ framework code.

The layout for a git repository for a standalone repository might look something like:

@icode 
mission
├── mission_deployment_1
├── fprime (git submodule to fprime repository)
├── ...
└── library (git submodule to an external library)
@endicode 

After creating the project layout, external deployments can also be created by copying the Ref
application.

After copying the Ref app, both in-tree and standalone deployments need to create and modify a
&lt;tt&gt;settings.ini&lt;/tt&gt; file in the root of the deployment to set the deployment toolchain, library
locations, and for standalone deployments, the location of the F´ framework.

For details on configuring the &lt;tt&gt;settings.ini&lt;/tt&gt; file, see the @ref "/Users/ashleysa/Desktop/f-prime/fprime-website-mkdocs-dev/fprime/docs/documentation/user-manual/framework/settings.md" "user guide page".</p>
<h1><a class="anchor" id="autotoc_md395"></a>
Develop Ports and Components</h1>
<p>Next, each developer is typically assigned a set of components to develop. This development starts with the ports that are defined to be used by the component, and then the component itself. This development is described in the following sections.</p>
<h2><a class="anchor" id="autotoc_md396"></a>
Design and Requirements</h2>
<p>Using the high-level requirements, the developer should define requirements for an individual component. These requirements should define the behaviors of the component, as well as the interfaces with other components.</p>
<h2><a class="anchor" id="autotoc_md397"></a>
Creating a Port</h2>
<p>Once the interfaces between components have been defined, ports should be created to implement those interfaces. This can be done by hand or by using <code>fprime-util new --port</code>.</p>
<p>It's recommended that ports are kept in their own directories, separate from components.</p>
<p>To create a new port:</p>
<ol type="1">
<li>If necessary, create a new port directory</li>
<li>Create a new port <code>*Ai.xml</code> file, possibly by copying from an existing port.</li>
<li>Add the new port xml file to <code>SOURCE_FILES</code> in the <code>CMakeLists.txt</code> file in the directory</li>
<li>If necessary, add the port directory to the deployment's cmake file with <code>add_fprime_subdirectory</code>.</li>
</ol>
<p>Alternatively, you may use <code>fprime-util new --port</code> from the fprime-tools package. This will walk the user through a few prompts about the port they want to create. Then the following will be done automatically:</p>
<ol type="1">
<li>If the specified directory for the port does not exist, it will be created</li>
<li>The <code>*Ai.xml</code> file will be generated, with information and arguments filled in</li>
<li>The port will be added to the source files of <code>CMakeLists.txt</code>. If there is no <code>CMakeLists.txt</code> file, one will be automatically generated and filled out</li>
<li>If necessary, the port directory will be added to the deployment's cmake file with <code>add_fprime_subdirectory</code></li>
</ol>
<h2><a class="anchor" id="autotoc_md398"></a>
Creating a Component Definition</h2>
<p>The first step in creating a component is to create the component xml definition, which defines which interfaces it implements, what commands it supports, which telemetry it provides, and what events it produces. This can be done by hand or by using <code>fprime-util new --component</code>.</p>
<p>To create a new component definition by hand:</p>
<ol type="1">
<li>Create a new component directory</li>
<li>Create a new component <code>*Ai.xml</code> file, possibly by copying from an existing component.</li>
<li>Optional, create a commands xml file for GDS commands and include it in the component xml file.</li>
<li>Optional, create an events xml file and include it in the component xml file.</li>
<li>Optional, create a telemetry xml for telemetry channels and include it in the component xml file.</li>
<li>Create a component <code>CMakeLists.txt</code> test file and add the component xml file to <code>SOURCE_FILES</code> variable in the file.</li>
<li>Add component directory to the deployment's cmake file with <code>add_fprime_subdirectory</code>.</li>
</ol>
<p>Alternatively, you may use <code>fprime-util new --component</code> from the fprime-tools package. This will walk the user through a few prompts about the component they are creating. Then the following will be done automatically:</p>
<ol type="1">
<li>A new component directory will be created</li>
<li>The <code>*Ai.xml</code> file will be generated and filled out with all of the information provided by the user</li>
<li>Commands, telemetry, events, and parameters will be added to the xml file based on what the user chooses through the prompts</li>
<li>Ports necessary for commands, telemetry, events, and parameters will be automatically added to the <code>*Ai.xml</code> file depending which elements the user chooses to include</li>
<li>A component <code>CMakeLists.txt</code> file will be generated and the component xml will be added to the source files.</li>
<li>The component directory will be added to the deployments cmake file with <code>add_fprime-subdirectory</code></li>
<li>The user is given the option to generate implementation <code>*.cpp</code> and <code>*.hpp</code> files</li>
<li>The user is given the option to generate a unit test directory with necessary unit test files within it.</li>
<li>An SDD file is generated with documentation about ports, commands, events, <br  />
 telemetry, parameters, and time of creation already filled out</li>
</ol>
<p>The <code>fprime-util new --component</code> uses the built-in cookiecutter template by default, but users can substitute their own component template by using the component_cookiecutter field of the settings.ini file. To learn more, see Creating and Using a Cookiecutter Template.</p>
<h2><a class="anchor" id="autotoc_md399"></a>
Component Implementation</h2>
<p>Next, the developer typically runs <code>fprime-util impl</code> to produce <code>-template</code> files of the hand-coded .cpp and .hpp files. However, if your component was created with <code>fprime-util new --component</code> and you select yes when asked about generating implementation files, this is automatically done. These can be used as a basis for implementation with all the stubs in place for the developer to implement the design. Developers then fill in these files and stubs with an implementation that supports the functionality of the design.</p>
<p>The component can then be built as development proceeds to look for errors. Ports are entirely autogenerated and do not need an implementation.</p>
<h2><a class="anchor" id="autotoc_md400"></a>
Component Unit Testing</h2>
<p>Along with implementation, unit tests can be templated and implemented to test against the requirements of the component. These should be developed and run often to ensure the implemented component works.</p>
<p>!!! note If <code>fprime-util new --cookiecutter</code> was used to create the component, and the user chose the generate unit tests, steps 1-3 should be skipped because these are automatically done.</p>
<p>To add unit tests to a component:</p>
<ol type="1">
<li>Create a test directory within the component (usually called <code>test</code>).</li>
<li>Run <code>fprime-util impl --ut</code> to generate unit testing code skeleton</li>
<li>Add unit test sources to <code>UT_SOURCE_FILES</code> and register unit tests with <code>register_fprime_ut()</code> in the component <code>CMakeLists.txt</code>.</li>
<li>Run <code>fprime-util check</code> in the component directory to run unit tests.</li>
</ol>
<h1><a class="anchor" id="autotoc_md401"></a>
Assemble Topology</h1>
<p>As components are completed, it is helpful to add them to the topology. As more components are completed, the topology is slowly built up over time. This can enable integration tests early on in the project. The full deployment should be built at this stage to ensure that there are no errors.</p>
<p>To add a component to the topology:</p>
<ol type="1">
<li>In the topology <code>*Ai.xml</code> file<ul>
<li>Import the component <code>*Ai.xml</code> xml file.</li>
<li>Instantiate the component as many times as necessary.</li>
<li>Connect component output ports with the corresponding input port and vice versa.</li>
</ul>
</li>
<li>In the topology <code>Components.hpp</code> file, declare the component with the same name as the topology xml file.</li>
<li>In the topology <code>Topology.cpp</code> file:<ul>
<li>Instantiate the component.</li>
<li>Call the component's <code>init</code> function.</li>
<li>If additional setup is required, call a user-defined setup function.</li>
<li>If using commands, register the component's commands.</li>
<li>If using health checking, add the component to ping entries.</li>
<li>If using an active component, start the component with <code>start</code> function and call <code>exit</code> when exiting.</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md402"></a>
Integration Testing</h1>
<p>As the topology comes together, it is helpful to write system-level tests for subsystems of the overall deployment. This makes sure that as a system, top-level requirements are met.</p>
<p>The fprime-gds has a python API that can be used to write integration test cases that support sending commands, checking for events, and getting telemetry channel readings. To get started with writing integration tests, check out the <a class="el" href="md_fprime_2docs_2documentation_2user-manual_2gds_2user__guide.html">GDS integration test guide</a>.</p>
<h1><a class="anchor" id="autotoc_md403"></a>
Conclusion</h1>
<p>This guide was an overview of the workflow most F´ developers follow, from the start to completion of a project. These workflows can be applied to any F´ project and should hopefully provide the smoothest development experience. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
